---
lang: zh-CN
title: code
description: æ‰‹å†™é¢˜
---

# code

## 1ã€æ ¹æ®ä»¥ä¸‹ä»£ç è¿›è¡Œå¯¹åº”æ“ä½œ
- `tree` æ˜¯ä¸€ä¸ªå±‚çº§ä¸å›ºå®šçš„æ ‘å½¢ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å« `key`ã€`count` å’Œ `children` å±æ€§ã€‚ç¼–å†™ä¸€æ®µä»£ç ï¼Œé€’å½’è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„ `count` å€¼ï¼Œ`count` å€¼è¡¨ç¤ºä»¥è¯¥èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘ä¸­åŒ…å«çš„èŠ‚ç‚¹æ€»æ•°ï¼ˆåŒ…å«å½“å‰èŠ‚ç‚¹è‡ªèº«ï¼‰ã€‚
::: details ç‚¹å‡»æŸ¥çœ‹å®ä¾‹ä»£ç 
```js
const tree = {
  key: "0",
  count: 0,
  children: [
    {
      key: "0-0",
      count: 0,
      children: [
        {
          key: "0-0-0",
          count: 0,
          children: [],
        },
        {
          key: "0-0-1",
          count: 0,
          children: [],
        },
      ],
    },
    {
      key: "0-1",
      count: 0,
      children: [],
    },
  ],
};
```
:::
::: details è¯¦æƒ…
```js
/**
 * é€’å½’è®¡ç®—æ ‘å½¢ç»“æ„ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„ count å€¼
 * count å€¼è¡¨ç¤ºä»¥è¯¥èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘ä¸­åŒ…å«çš„èŠ‚ç‚¹æ€»æ•°ï¼ˆåŒ…å«å½“å‰èŠ‚ç‚¹è‡ªèº«ï¼‰
 * @param {Object} node - å½“å‰éœ€è¦è®¡ç®— count å€¼çš„èŠ‚ç‚¹ï¼Œè¯¥èŠ‚ç‚¹åŒ…å« keyã€count å’Œ children å±æ€§
 * @returns {Object} - è¿”å›è®¡ç®—å¥½ count å€¼åçš„å½“å‰èŠ‚ç‚¹
 */
const calculateCount = node => {
  // è·å–å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ•°ç»„é•¿åº¦
  const length = node.children.length;

  // å¦‚æœå­èŠ‚ç‚¹æ•°ç»„é•¿åº¦ä¸º 0ï¼Œè¯´æ˜å½“å‰èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹
  if (!length) {
    // æ²¡æœ‰å­èŠ‚ç‚¹æ—¶ï¼Œcount å€¼ä»…åŒ…å«å½“å‰èŠ‚ç‚¹è‡ªèº«ï¼Œæ‰€ä»¥è®¾ä¸º 1
    node.count = 1; 
    // è¿”å›è®¡ç®—å¥½ count å€¼çš„å½“å‰èŠ‚ç‚¹
    return node;
  }

  // åˆå§‹åŒ–ä¸€ä¸ªå˜é‡ totalï¼Œç”¨äºç´¯åŠ æ‰€æœ‰å­èŠ‚ç‚¹çš„ count å€¼
  let total = 0;

  // éå†å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹
  for (let index = 0; index < length; index++) {
    // è·å–å½“å‰éå†åˆ°çš„å­èŠ‚ç‚¹
    const child = node.children[index];
    // é€’å½’è°ƒç”¨ calculateCount å‡½æ•°ï¼Œè®¡ç®—å­èŠ‚ç‚¹çš„ count å€¼
    calculateCount(child); 
    // å°†å­èŠ‚ç‚¹è®¡ç®—å¥½çš„ count å€¼ç´¯åŠ åˆ° total ä¸­
    total += child.count;
  }

  // å½“å‰èŠ‚ç‚¹çš„ count å€¼ç­‰äºæ‰€æœ‰å­èŠ‚ç‚¹çš„ count å€¼æ€»å’ŒåŠ ä¸Šè‡ªèº«ï¼ˆå³åŠ  1ï¼‰
  node.count = total + 1;
  // è¿”å›è®¡ç®—å¥½ count å€¼çš„å½“å‰èŠ‚ç‚¹
  return node;
};


const result = calculateCount(tree);
console.log("ğŸš€ ~ index.js:39 ~ result:", result);
```
::: 

## 2ã€æ‰‹å†™é˜²æŠ–å‡½æ•°
- é˜²æŠ–å‡½æ•°ï¼šé˜²æŠ–å‡½æ•°æ˜¯æŒ‡åœ¨äº‹ä»¶è¢«è§¦å‘nç§’åå†æ‰§è¡Œå›è°ƒï¼Œå¦‚æœåœ¨è¿™nç§’å†…äº‹ä»¶åˆè¢«è§¦å‘ï¼Œåˆ™é‡æ–°å¼€å§‹å»¶æ—¶ã€‚
- åº”ç”¨åœºæ™¯ï¼š
  > - æœç´¢æ¡†è¾“å…¥ã€‚
  > - çª—å£resizeã€‚
  > - æŒ‰é’®ç‚¹å‡»ã€‚
  > - æ»šåŠ¨äº‹ä»¶ã€‚
- å®ç°åŸç†ï¼š
  > - åˆ©ç”¨é—­åŒ…ä¿å­˜å®šæ—¶å™¨ã€‚
  > - æ¯æ¬¡è§¦å‘äº‹ä»¶æ—¶ï¼Œå…ˆæ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨ï¼Œå†é‡æ–°è®¾ç½®å®šæ—¶å™¨ã€‚
  > - å®šæ—¶å™¨åˆ°æœŸåï¼Œæ‰§è¡Œå›è°ƒå‡½æ•°ã€‚
::: details è¯¦æƒ…
```js
function debounce(fn, delay) {
  let timer = null;
  return function (...args) {
    // æ¯æ¬¡è§¦å‘äº‹ä»¶æ—¶ï¼Œå…ˆæ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
    if (timer) {
      clearTimeout(timer);
    }
    // é‡æ–°è®¾ç½®å®šæ—¶å™¨
    timer = setTimeout(() => {
      // å®šæ—¶å™¨åˆ°æœŸåï¼Œæ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œç»‘å®šå½“å‰ä¸Šä¸‹æ–‡å’Œå‚æ•°
      fn.apply(this, args);
    }, delay);
  };
}

// æµ‹è¯•é˜²æŠ–å‡½æ•°
const testFn = debounce(() => {
  console.log("é˜²æŠ–å‡½æ•°è§¦å‘");
}, 1000);

// æ¨¡æ‹Ÿè¿ç»­è§¦å‘äº‹ä»¶
testFn(); // 1ç§’åè§¦å‘
testFn(); // 1ç§’åè§¦å‘
testFn(); // 1ç§’åè§¦å‘
```
:::

## 3ã€æ‰‹å†™èŠ‚æµå‡½æ•°
- èŠ‚æµå‡½æ•°ï¼šèŠ‚æµå‡½æ•°æ˜¯æŒ‡åœ¨äº‹ä»¶è¢«è§¦å‘nç§’å†…åªæ‰§è¡Œä¸€æ¬¡å›è°ƒã€‚
- åº”ç”¨åœºæ™¯ï¼š
  > - æŒ‰é’®ç‚¹å‡»ã€‚
  > - çª—å£resizeã€‚
  > - æ»šåŠ¨äº‹ä»¶ã€‚
- å®ç°åŸç†ï¼š
  > - åˆ©ç”¨é—­åŒ…ä¿å­˜ä¸Šæ¬¡æ‰§è¡Œæ—¶é—´ã€‚
  > - æ¯æ¬¡è§¦å‘äº‹ä»¶æ—¶ï¼Œè·å–å½“å‰æ—¶é—´ä¸ä¸Šæ¬¡æ‰§è¡Œæ—¶é—´çš„å·®å€¼ã€‚
  > - å¦‚æœå·®å€¼å¤§äºç­‰äºè®¾å®šçš„æ—¶é—´é—´éš”ï¼Œåˆ™æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œå¹¶æ›´æ–°ä¸Šæ¬¡æ‰§è¡Œæ—¶é—´ã€‚
::: details è¯¦æƒ…
```js
function throttle(fn, delay) {
  let lastTime = 0; // ä¸Šä¸€æ¬¡æ‰§è¡Œå‡½æ•°çš„æ—¶é—´æˆ³ï¼Œåˆå§‹ä¸º 0
  return function (...args) {
    // å½“å‰æ—¶é—´æˆ³
    const nowTime = Date.now();
    // è®¡ç®—å½“å‰æ—¶é—´ä¸ä¸Šæ¬¡æ‰§è¡Œæ—¶é—´çš„å·®å€¼ï¼Œ
    // å¦‚æœå·®å€¼å¤§äºç­‰äºè®¾å®šçš„æ—¶é—´é—´éš”ï¼Œåˆ™æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œå¹¶æ›´æ–°ä¸Šæ¬¡æ‰§è¡Œæ—¶é—´
    if (nowTime - lastTime >= delay) {
      // æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œç»‘å®šå½“å‰ä¸Šä¸‹æ–‡å’Œå‚æ•°
      fn.apply(this, args);
      // æ›´æ–°ä¸Šæ¬¡æ‰§è¡Œæ—¶é—´ä¸ºå½“å‰æ—¶é—´
      lastTime = nowTime;
    }
    // å¦‚æœå·®å€¼å°äºè®¾å®šçš„æ—¶é—´é—´éš”ï¼Œåˆ™ä¸æ‰§è¡Œå›è°ƒå‡½æ•°
  };
}
```
:::

## 4ã€æ‰‹å†™æŸ¯ç†åŒ–å‡½æ•°
- æŸ¯ç†åŒ–å‡½æ•°ï¼šæŸ¯ç†åŒ–å‡½æ•°æ˜¯æŒ‡å°†ä¸€ä¸ªå¤šå‚æ•°å‡½æ•°è½¬æ¢ä¸ºå¤šä¸ªå•å‚æ•°å‡½æ•°çš„æŠ€æœ¯ã€‚
- åº”ç”¨åœºæ™¯ï¼š
  > - å‡½æ•°å‚æ•°å¤ç”¨ã€‚
  > - å‡½æ•°å‚æ•°å»¶è¿Ÿæ‰§è¡Œã€‚
- å®ç°åŸç†ï¼š
  > - åˆ©ç”¨é—­åŒ…ä¿å­˜å‚æ•°ã€‚
  > - æ¯æ¬¡è°ƒç”¨å‡½æ•°æ—¶ï¼Œåˆ¤æ–­å‚æ•°æ˜¯å¦è¶³å¤Ÿã€‚
  > - å¦‚æœå‚æ•°è¶³å¤Ÿï¼Œåˆ™æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚
  > - å¦‚æœå‚æ•°ä¸è¶³ï¼Œåˆ™è¿”å›æ–°çš„å‡½æ•°ï¼Œç­‰å¾…å‚æ•°è¡¥å……ã€‚
::: details è¯¦æƒ…
```js
function currying(fn, ...args) {
  // å¦‚æœå‚æ•°è¶³å¤Ÿï¼Œåˆ™æ‰§è¡Œå›è°ƒå‡½æ•°
  if (args.length >= fn.length) {
    return fn.apply(this, args);
  }
  // å¦‚æœå‚æ•°ä¸è¶³ï¼Œåˆ™è¿”å›æ–°çš„å‡½æ•°ï¼Œç­‰å¾…å‚æ•°è¡¥å……
  // return currying.bind(this, fn, ...args);
  return (...newArgs) => currying(fn, ...args, ...newArgs);
}

// æµ‹è¯•æŸ¯ç†åŒ–å‡½æ•°
const testFn = currying((a, b, c) => {
  console.log("æŸ¯ç†åŒ–å‡½æ•°è§¦å‘", a, b, c);
});

// æ¨¡æ‹Ÿè¿ç»­è§¦å‘äº‹ä»¶
testFn(1)(2)(3); // æŸ¯ç†åŒ–å‡½æ•°è§¦å‘ 1 2 3
testFn(1, 2)(3); // æŸ¯ç†åŒ–å‡½æ•°è§¦å‘ 1 2 3
testFn(1, 2, 3); // æŸ¯ç†åŒ–å‡½æ•°è§¦å‘ 1 2 3
```
:::

## 5ã€æ‰‹å†™å†’æ³¡æ’åº
- å†’æ³¡æ’åºï¼šå†’æ³¡æ’åºæ˜¯ä¸€ç§ç®€å•çš„æ’åºç®—æ³•ï¼Œå®ƒé‡å¤åœ°éå†å¾…æ’åºçš„æ•°åˆ—ï¼Œæ¯”è¾ƒç›¸é‚»å…ƒç´ å¹¶äº¤æ¢é¡ºåºé”™è¯¯çš„å…ƒç´ ï¼Œç›´åˆ°æ²¡æœ‰éœ€è¦äº¤æ¢çš„å…ƒç´ ä¸ºæ­¢ã€‚
- åº”ç”¨åœºæ™¯ï¼š
  > - æ•°ç»„æ’åºã€‚
- å®ç°åŸç†ï¼š
  > - ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ¯”è¾ƒç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ ã€‚
  > - å¦‚æœç¬¬ä¸€ä¸ªå…ƒç´ å¤§äºç¬¬äºŒä¸ªå…ƒç´ ï¼Œåˆ™äº¤æ¢å®ƒä»¬çš„ä½ç½®ã€‚
  > - å¯¹æ¯ä¸€å¯¹ç›¸é‚»çš„å…ƒç´ åšåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ï¼Œæœ€åçš„å…ƒç´ ä¼šæ˜¯æœ€å¤§çš„æ•°ã€‚
  > - é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªã€‚
  > - é‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œç›´åˆ°æ²¡æœ‰éœ€è¦äº¤æ¢çš„å…ƒç´ ä¸ºæ­¢ã€‚
- ä¼˜åŒ–ï¼š
  > - å¯ä»¥åœ¨æ¯ä¸€è½®æ’åºä¸­ï¼Œè®°å½•æœ€åä¸€æ¬¡äº¤æ¢çš„ä½ç½®ï¼Œä½œä¸ºä¸‹ä¸€è½®æ’åºçš„è¾¹ç•Œã€‚
  > - å¯ä»¥æ·»åŠ ä¸€ä¸ªæ ‡å¿—ä½ï¼Œç”¨äºåˆ¤æ–­æ˜¯å¦å‘ç”Ÿäº†äº¤æ¢ã€‚å¦‚æœæ²¡æœ‰å‘ç”Ÿäº¤æ¢ï¼Œåˆ™è¯´æ˜æ•°ç»„å·²ç»æœ‰åºï¼Œç›´æ¥ç»“æŸæ’åºã€‚
- æ—¶é—´å¤æ‚åº¦ï¼š
  > - å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)
  > - æœ€åæ—¶é—´å¤æ‚åº¦ï¼šO(n^2)
  > - æœ€å¥½æ—¶é—´å¤æ‚åº¦ï¼šO(n)
- ç©ºé—´å¤æ‚åº¦ï¼š
  > - O(1)
- ç¨³å®šæ€§ï¼š
  > - ç¨³å®šæ’åºç®—æ³•ã€‚
::: details è¯¦æƒ…
```js
// åŸºç¡€ç‰ˆï¼Œæ—¶é—´å¤æ‚åº¦O(n^2)
function bubbleSort(arr) {
  const len = arr.length;
  // å¤–å±‚å¾ªç¯ï¼Œæ§åˆ¶æ’åºè½®æ•°
  for (let i = 0; i < len - 1; i++) {
    // å†…å±‚å¾ªç¯ï¼Œæ§åˆ¶æ¯è½®æ’åºçš„æ¯”è¾ƒæ¬¡æ•°
    for (let j = 0; j < len - 1 - i; j++) {
      // æ¯”è¾ƒç›¸é‚»å…ƒç´ ï¼Œå¦‚æœå‰ä¸€ä¸ªæ¯”åä¸€ä¸ªå¤§
      if (arr[j] > arr[j + 1]) {
        // äº¤æ¢å…ƒç´ ä½ç½®ï¼ˆå‡åºï¼‰
        [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];
      }
    }
  }
  // è¿”å›æ’åºåçš„æ•°ç»„
  return arr;
}
const arr = [5, 3, 8, 4, 2];
const sortedArr = bubbleSort(arr);
console.log("ğŸš€ ~ index.js:39 ~ sortedArr:", sortedArr);

// è¿›é˜¶ç‰ˆï¼Œæ—¶é—´å¤æ‚åº¦å¯ä»¥ä¼˜åŒ–åˆ° â€‹â€‹O(n)â€‹â€‹
// ä¼˜åŒ–æ€è·¯ï¼šå¦‚æœæŸä¸€è½®æ²¡æœ‰ä»»ä½•äº¤æ¢ï¼Œè¯´æ˜æ•°ç»„å·²ç»æœ‰åºï¼Œå¯ä»¥æå‰é€€å‡ºï¼
function bubbleSortOptimized(arr) {
  const len = arr.length;
  let swapped;
  for (let i = 0; i < len - 1; i++) {
    swapped = false;
    for (let j = 0; j < len - 1 - i; j++) {
      if (arr[j] > arr[j + 1]) {
        [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];
        swapped = true;
      }
    }
    if (!swapped) break; // æœ¬è½®æ— äº¤æ¢ï¼Œè¯´æ˜å·²æœ‰åºï¼Œç›´æ¥é€€å‡º
  }
  return arr;
}
```
:::

