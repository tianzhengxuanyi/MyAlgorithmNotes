### 预处理质数(筛质数)

#### [204. 计数质数](https://leetcode.cn/problems/count-primes/description/)
 
给定整数 n ，返回 所有小于非负整数 n 的质数的数量 。

**题解：**

如果当前数为质数，则将其所有倍数标记为合数。

```js
/**
 * 功能：计算小于n的质数个数
 * 算法类型：预处理 + 查表
 * 输入参数：
 *   n - 目标数值
 * 返回值：
 *   number - 小于n的质数个数
 * 算法核心思想：
 *   利用全局预处理好的质数标记数组isPrimes，直接统计其中小于n的质数数量
 * 时间复杂度：O(1)，查询操作，不考虑预处理时间
 * 空间复杂度：O(1)，只使用常数额外空间
 */
var countPrimes = function (n) {
    let ans = 0;  // 初始化质数计数器
    // 遍历所有小于n的数字，统计其中的质数
    for (let i = 2; i < n; i++) {  // 从2开始，因为2是最小的质数
        if (isPrimes[i]) {  // 如果i是质数（isPrimes[i]为1）
            ans++;  // 质数计数器加1
        }
    }
    return ans;  // 返回质数个数
};

// 全局常量和预处理
const MX = 5 * 1e6;  // 预处理的最大数值（500万）
const isPrimes = Array(MX).fill(1);  // 初始化质数标记数组，1表示是质数，0表示非质数

// 使用埃拉托斯特尼筛法预处理所有质数
for (let i = 2; i < MX; i++) {  // 从2开始遍历
    if (isPrimes[i]) {  // 如果i是质数
        // 标记i的所有倍数为非质数
        for (let j = i; i * j < MX; j++) {  // j从i开始，避免重复标记
            isPrimes[i * j] = 0;  // 将i*j标记为非质数
        }
    }
}

```