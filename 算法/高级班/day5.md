### 题目1（BFPRT）

在一个无序数组中，求最小的第k个数。

**思路1（荷兰旗排序）：**

- 就是 partition, 随机选个数，左边都是小于的数，然后中间等于这个数，右边都是大于这个数
- 然后靠下标看我们的此时有没有包括住第 k 小的数，如果没有就递归左边 / 右边
- parition 本身就是 O (N) 复杂度，现在就是看递归是要多久
- 用 master 公式，因为是随机选一个数作为 partiiton, 这个算法考虑递归是 O (N)

如果不是随机选数，最差情况可能是 O (N2), 笔试这么解没问题


**思路2（BFPRT）：**

- 不是随机选个数，而是有讲究的选一个数 (跟上面方式的唯一区别)
- 用这个数做 partition
- 如果中间区域没有就看下标情况去递归左边或者右边

怎么有讲究的选一个数？

1. 一开始无序数组按照下标分组，每五个分一组，剩下如果不够五个的也分一组

2. 每一组选一个中位数，放进一个 Marray 数组里面 (O (N) 的时间复杂度)

3. 求 Marray 数组的上中位数 (不是 medium, 而是中间那个元素，如果比如说是 4 个元素那就是第二个元素)

    怎么求？

    **就是调用我们整个算法的本身（在一个无序数组中，求最小的第k个数。），只不过用一个数，这个数是 Marray 数组长度 / 2 在 Marray 数组 parition 然后递归去找，找出来的肯定是中位数，这个中位数就是我们要很讲究选的数**

这样就不需要用概率随机选一个数，平均下来才达到整个算法 O (N), 而是可以直接有讲究的选一个数达到严格的 O (N)

    所有组的中位数的中位数，能确保原数组里面肯定有一些数是大于这个数的，所以不可能会出现最差情况

### 题目2（动态规划优化状态依赖的技巧）

给定一个正数数组arr，arr[i]表示第i种货币的面值，可以使用任意张。给定一个正数aim，返回组成aim的方法数有多少种？


### 题目3（动态规划优化状态依赖的技巧）

给定一个正数1，裂开的方法有一种，(1)

给定一个正数2，裂开的方法有两种，(1和1)、(2)

给定一个正数3，裂开的方法有三种，(1、1、1)、(1、2)、(3)

给定一个正数4，裂开的方法有五种，(1、1、1、1)、(1、1、2)、(1、3)、（2、2）、（4）

给定一个正数n，求裂开的方法数。

**思路：（动态规划-不降序裂开）**

1. process(pre, rest)，pre裂开的前一部分，rest还剩多少值需要裂开，接下来每次裂开都不能小于pre。返回裂开的方法数。

**动态规划：**

**斜率优化（优化枚举行为）：**


### 题目4（二叉树递归讨论，拓扑贡献记录）

给定一棵二叉树的头节点head，已知所有节点的值都不一样，返回其中最大的且符合搜索二叉树条件的最大拓扑结构的大小。

拓扑结构：不是子树，只要能连起来的结构都算。

**思路：**

1. process(X)，求出以X为头节点时符合搜索二叉树条件的最大拓扑结构的大小。
2. m = process(X.left)，n = process(X.right)，求出左子树和右子树的符合条件的节点数，再根据m和n加工出process(X)的返回值。
3. 遍历左子树的右边节点（符合搜索二叉树条件的左子树左边节点都小于X.left.val，不用判断），更新出左子树贡献的节点个数。遍历右子树的左边节点，更新出右子树贡献的节点个数。

![](../image/高级班day5-1.png)

### 题目5（完美洗牌问题）

给定一个长度为偶数的数组arr，长度记为2*N。前N个为左部分，后N个为右部分。

arr就可以表示为{L1,L2,..,Ln,R1,R2,..,Rn}，请将数组调整成{R1,L1,R2,L2,..,Rn,Ln}的样子。

**思路：**
```
a        b        c        d        e        f

0        1        2        3        4        5

L1       L2       L3       R1       R2       R3

[a        d        b        e        c        f]

0         1        2        3        4        5

```

arr中下标的变化规律

```
i小于等于N         i大于N

i左半区            右半区

2*i                2（i-N） - 1
```

下标循环对，可能存在多个不相交的小环

N（偶数）

当N = 3^k - 1，存在的结论：不同环的触发点：1，3，9....3^(k-1)

N=普通偶数时

……a b c d e 甲乙 ……

左组内部逆序，乙组内部逆序，整体逆序

……甲乙abcde……

假设N = 14，左7，右7

```
L1 L2 L3 L4 L5 L6 L7 R1 R2 R3 R4 R5 R6 R7
```

14最接近8

先让`L1 L2 L3 L4 R1 R2 R3 R4`调整

将`L5 L6 L7 R1 R2 R3 R4`逆序

调整完后变成`L1 L2 L3 L4 R1 R2 R3 R4 L5 L6 L7 R5 R6 R7`

再逆序变成 `R1 R2 R3 R4 L1 L2 L3 L4 L5 L6 L7 R5 R6 R7 `

对前八位进行下标循环交换

剩下6，接近2，重复……

**拓展:**

数组无序时候，

调整为[a    b    c    d   e  f   g   h  i  ……]

使得关系为小于等于和大于等于交错

1）arr 排序（堆排）

2）**N=偶数**

L1 L2 …… Li R1 R2 …… Ri

从小到大

调整为R1 L1 R2 L2 …… Ri Li

**N=奇数**

L0 L1 L2 …… Li R1 R2 …… Ri

调整为L1 R1 L1 R2 L2 …… Ri Li接着最后加上L0
